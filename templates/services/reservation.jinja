{% extends "base.jinja" %}

{% block contenu %}
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="alert alert-{{ category }} mt-3">{{ message }}</div>
      {% endfor %}
    {% endif %}
  {% endwith %}

  <div class="container mt-4">
    <h3 class="text-center mb-4">Choisir une date et une heure</h3>

    <div class="d-flex justify-content-center">
      <form
        id="formReservation"
        data-id-service="{{ s.id_service }}"
        action="{{ url_for('reservation.reserver_service', id_service=s.id_service) }}"
        method="POST"
        novalidate
        style="width: 100%; max-width: 400px;"
      >
        <div class="mb-3">
          <label for="date" class="form-label">Date</label>
          <input
            type="date"
            name="date"
            id="date"
            class="form-control {{ class_date|default('') }}"
            value="{{ date_choisi|default('') }}"
            required
          >
          <div class="invalid-feedback">Ne doit pas être vide</div>
        </div>

        <div class="mb-3">
          <label for="heure" class="form-label">Heure</label>
          <input
            type="time"
            name="heure"
            id="heure"
            class="form-control {{ class_heure|default('') }}"
            value="{{ heure_choisi|default('') }}"
            step="60"
            required
          >
          <div class="invalid-feedback">Ne doit pas être vide</div>

          <p id="dispoFeedback" class="form-text text-muted mt-1 mb-0">
            Choisissez une date et une heure.
          </p>
        </div>

        <button id="btnReserver" type="submit" class="btn btn-primary" disabled>
          Réserver
        </button>
      </form>
    </div>
  </div>
{% endblock %}

{% block scripts %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/utils.js') }}"></script>
  <script src="{{ url_for('static', filename='js/reservation.js') }}"></script>
{% endblock %}
